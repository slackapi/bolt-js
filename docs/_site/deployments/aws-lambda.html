<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
  
    <title>Slack | Bolt for JavaScript</title>
    <meta name="author" content="Slack">
    <meta name="description" content="A framework that makes Slack app development fast and straight-forward. With a single interface for Slack’s Web API, Events API, and interactive features, Bolt gives you the full power of the Slack platform out of the box.">
    <link rel="canonical" href="http://localhost:4000/bolt-js/deployments/aws-lambda">
    <link href="https://a.slack-edge.com/17c88/style/rollup-slack_kit_legacy_adapters.css" rel="stylesheet" type="text/css">
    <link href="https://a.slack-edge.com/cc5205/style/rollup-api_site.css" rel="stylesheet" type="text/css">
    
    <link href="http://localhost:4000/bolt-js/assets/style.css" rel="stylesheet" type="text/css">
  
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    

    <!--[if lt IE 9]>
    <script src="https://a.slack-edge.com/ef0d/js/libs/html5shiv.js"></script>
    <![endif]-->
  
    <link id="favicon" rel="shortcut icon" href="http://localhost:4000/bolt-js/assets/bolt-favicon.png" sizes="16x16 32x32 48x48" type="image/png" />
  
  </head>


<body>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KFZ5MK7');</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KFZ5MK7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <div class="wrapper">
    <div class="panel">
      <div class="sidebar-content">
  <div class="logo">
    <span class="icon">
      <img src="http://localhost:4000/bolt-js/assets/bolt-js-logo.svg">
    </span>

    <span class="name">
      Bolt
    </span>

    <!-- Liquid has no ternary operator, so this is just meant to exclude 
      english sections since they are at the root URL -->
    

    <span class="version">
      
      <a href="https://github.com/slackapi/bolt-js/releases/tag/%40slack/bolt%403.18.0">v3.18.0</a>
    </span>
  </div>

  <ul class="sidebar-section">
    <a href="http://localhost:4000/bolt-js/tutorial/getting-started"><li class="title">Getting started</li></a>
    <a href="http://localhost:4000/bolt-js/reference"><li class="title">Reference</li></a>
  </ul>

  <ul class="sidebar-section">
    <a href="http://localhost:4000/bolt-js/concepts#basic"><li class="title">Basic concepts</li></a>
     
    <a href="http://localhost:4000/bolt-js/concepts#message-listening">
      <li>Listening to messages</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#message-sending">
      <li>Sending messages</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#event-listening">
      <li>Listening to events</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#web-api">
      <li>Using the Web API</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#action-listening">
      <li>Listening to actions</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#action-respond">
      <li>Responding to actions</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#acknowledge">
      <li>Acknowledging requests</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#shortcuts">
      <li>Listening and responding to shortcuts</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#commands">
      <li>Listening and responding to commands</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#creating-modals">
      <li>Opening modals</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#updating-pushing-views">
      <li>Updating and pushing views</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#view-submissions">
      <li>Listening to views</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#publishing-views">
      <li>Publishing views to App Home</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#options">
      <li>Listening and responding to options</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#authenticating-oauth">
      <li>Authenticating with OAuth</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#socket-mode">
      <li>Using Socket Mode</li>
    </a>
    
  </ul>

  <ul class="sidebar-section">
    <a href="http://localhost:4000/bolt-js/concepts#advanced">
      <li class="title">Advanced concepts</li>
    </a>
     
    <a href="http://localhost:4000/bolt-js/concepts#error-handling">
      <li>Handling errors</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#authorization">
      <li>Authorization</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#token-rotation">
      <li>Token rotation</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#conversation-store">
      <li>Conversation stores</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#global-middleware">
      <li>Global middleware</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#listener-middleware">
      <li>Listener middleware</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#context">
      <li>Adding context</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#deferring-initialization">
      <li>Deferring App initialization</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#logging">
      <li>Logging</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#receiver">
      <li>Customizing a receiver</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/concepts#custom-routes">
      <li>Adding Custom HTTP routes</li>
    </a>
    
  </ul>

  
  
    <ul class="sidebar-section"> 
        <li class="title">Deployments</li>
      
        <a href="http://localhost:4000/bolt-js/deployments/aws-lambda">
          <li>AWS Lambda</li>
        </a>
      
        <a href="http://localhost:4000/bolt-js/deployments/heroku">
          <li>Heroku Platform</li>
        </a>
      
    </ul>
  

  <ul class="sidebar-section">
    <a href="http://localhost:4000/bolt-js/concepts#steps">
      <li class="title">
        Workflow steps
        <span class="label-deprecated">
          Deprecated
        </span>
      </li>
    </a>
     
      
    
      
      <a href="http://localhost:4000/bolt-js/concepts#creating-steps">
        
        <!--UNCOMMENT AFTER GA  -->
        <li>
          Creating workflow steps
        </li>
      </a>
      
    
      
      <a href="http://localhost:4000/bolt-js/concepts#adding-editing-steps">
        
        <!--UNCOMMENT AFTER GA  -->
        <li>
          Adding or editing workflow steps
        </li>
      </a>
      
    
      
      <a href="http://localhost:4000/bolt-js/concepts#saving-steps">
        
        <!--UNCOMMENT AFTER GA  -->
        <li>
          Saving step configurations
        </li>
      </a>
      
    
      
      <a href="http://localhost:4000/bolt-js/concepts#executing-steps">
        
        <!--UNCOMMENT AFTER GA  -->
        <li>
          Executing workflow steps
        </li>
      </a>
      
    
  </ul>

  <ul class="sidebar-section">
    
    
    <a href="http://localhost:4000/bolt-js/tutorial/getting-started-http">
      <li class="title">Getting started with HTTP</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/tutorial/hubot-migration">
      <li class="title">Migrating Hubot apps</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/tutorial/migration-v2">
      <li class="title">Migrating to V2</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/tutorial/migration-v3">
      <li class="title">Migrating to V3</li>
    </a>
    
    <a href="http://localhost:4000/bolt-js/tutorial/using-typescript">
      <li class="title">Using TypeScript</li>
    </a>
    
    <a href="https://github.com/SlackAPI/bolt-js/blob/main/.github/contributing.md">
      <li class="title">Contributing</li>
    </a>
  </ul>
</div>

    </div>


    <div class="content">
        <div class="mainheader">
          <div class="header">
  <div class="header_nav">
    <a href="https://github.com/SlackAPI/bolt-js" class="btn header_btn float_right"><ts-icon class="ts_icon_github"></ts-icon>Code on GitHub</a>
    <a href="https://api.slack.com" class="btn header_btn float_right"><ts-icon class="ts_icon_slack_pillow"></ts-icon>Slack Platform Home</a>
    <!-- If we add more languages, this logic will need to change -->
    
      <a href="http://localhost:4000/bolt-js/ja-jp" class="header_btn language-switcher float_right">日本語 (Japanese)</a>
    
    </div>
</div>
        </div>

        <div class="tutorial-nav">
          <ul class="tutorial-nav-list"></ul>
        </div>
        
        <div class="tutorial">
          <h1 id="deploying-to-aws-lambda">Deploying to AWS Lambda</h1>

<div class="section-content">
  <p>This guide walks you through preparing and deploying a Slack app using <a href="/bolt-js">Bolt for JavaScript</a>, the <a href="https://serverless.com/">Serverless Framework</a>, and <a href="https://aws.amazon.com/lambda/">AWS Lambda</a>.</p>
</div>

<p>When you’re finished, you’ll have this ⚡️<a href="https://github.com/slackapi/bolt-js/tree/main/examples/deploy-aws-lambda">Deploying to AWS Lambda app</a> to run, modify, and make your own.</p>

<hr>

<h3 id="set-up-aws-lambda">Set up AWS Lambda</h3>

<p><a href="https://aws.amazon.com/lambda/">AWS Lambda</a> is a serverless, Function-as-a-Service (FaaS) platform that allows you to run code without managing servers. In this section, we’ll configure your local machine to access AWS Lambda.</p>

<blockquote>
  <p>💡 Skip this section if you have already <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html#cli-configure-quickstart-profiles">configured a profile</a> on your local machine to access AWS Lambda.</p>
</blockquote>

<p><strong>1. Sign up for an AWS account</strong></p>

<p>If you don’t already have an account, you should <a href="https://aws.amazon.com/">sign up for AWS</a> and follow the on-screen instructions.</p>

<blockquote>
  <p>💡 You may be asked for payment information during the sign up. Don’t worry, this guide only uses the <a href="https://aws.amazon.com/lambda/pricing/">free tier</a>.</p>
</blockquote>

<p><strong>2. Create an AWS access key</strong></p>

<p>Next, you’ll need programmatic access to your AWS account to deploy onto Lambda. In the world of AWS, this requires an <strong>Access Key ID</strong> and <strong>Secret Access Key</strong>.</p>

<p>We recommend watching this short, step-by-step video to 🍿 <a href="https://www.youtube.com/watch?v=KngM5bfpttA">create an IAM user and download the access keys</a>.</p>

<blockquote>
  <p>💡 <strong>Do you already have an IAM user?</strong> Follow the official AWS guide to <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html#cli-configure-quickstart-creds">create access keys for existing IAM users</a>.</p>
</blockquote>

<p><strong>3. Install the AWS CLI</strong></p>

<p>The AWS tools are available as a Command Line Interface (CLI) and can be <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html">installed on macOS, Windows, or Linux</a>.</p>

<p>On macOS, you can install the AWS CLI by <a href="https://awscli.amazonaws.com/AWSCLIV2.pkg">downloading the latest package installer</a>.</p>

<p><strong>4. Configure an AWS profile</strong></p>

<p>You can use the AWS CLI to configure a profile that stores your access key pair on your local machine. This profile is used by the CLI and other tools to access AWS.</p>

<p>The quickest way to <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html#cli-configure-quickstart-config">configure your profile</a> is to run this command and follow the prompts:</p>

<div class="language-zsh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre>aws configure
<span class="c"># AWS Access Key ID [None]: &lt;your-aws-access-key&gt;</span>
<span class="c"># AWS Secret Access Key [None]: &lt;your-aws-secret&gt;</span>
<span class="c"># Default region name [None]: us-east-1</span>
<span class="c"># Default output format [None]: json</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<blockquote>
  <p>💡 Customize the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html#cli-configure-quickstart-region">region</a> and <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html#cli-configure-quickstart-format">output format</a> best for you.</p>
</blockquote>

<p>That wraps up configuring your local machine to access AWS. 👏 Next, let’s do the same with the Serverless Framework.</p>

<hr>

<h3 id="set-up-serverless-framework">Set up Serverless Framework</h3>

<p>The <a href="https://serverless.com/">Serverless Framework</a> includes tools that let you easily configure, debug, and deploy your app to AWS Lambda.</p>

<p><strong>1. Install the Serverless Framework CLI</strong></p>

<p>The Serverless tools are available as a Command Line Interface (CLI) and can be installed on macOS, Windows, or Linux. Check out the <a href="https://www.serverless.com/framework/docs/getting-started/">Serverless Getting Started documentation</a> for instructions on how to install.</p>

<p>Once the installation is complete, test the Serverless CLI by displaying the commands available to you:</p>

<div class="language-shell highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>serverless <span class="nb">help</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>You’re now set up with the Serverless tools! Let’s move on to preparing your Bolt app to run as an AWS Lambda function.</p>

<hr>

<h3 id="get-a-bolt-slack-app">Get a Bolt Slack app</h3>

<p>If you haven’t already built your own Bolt app, you can use our <a href="/bolt-js/tutorial/getting-started">Getting Started guide</a> or clone the template app below:</p>

<div class="language-shell highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>git clone https://github.com/slackapi/bolt-js-getting-started-app.git
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>After you have a Bolt app, navigate to its directory:</p>

<div class="language-shell highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="nb">cd </span>bolt-js-getting-started-app/
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>Now that you have an app, let’s prepare it for AWS Lambda and the Serverless Framework.</p>

<hr>

<h3 id="prepare-the-app">Prepare the app</h3>

<p><strong>1. Prepare the app for AWS Lambda</strong></p>

<p>By default, our Bolt Getting Started app sample is configured to use SocketMode. Let’s update the setup in <code class="language-plaintext highlighter-rouge">app.js</code> to have our app listen for HTTP requests instead.</p>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td>
<td class="rouge-code"><pre><span class="c1">// Initializes your app with your bot token</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">({</span>
  <span class="na">token</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">SLACK_BOT_TOKEN</span><span class="p">,</span>
  <span class="na">socketMode</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// delete this line</span>
  <span class="na">appToken</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">SLACK_APP_TOKEN</span><span class="p">,</span> <span class="c1">// delete this line</span>
<span class="p">});</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>Next, we’ll customize your Bolt app’s <a href="https://slack.dev/bolt-js/concepts#receiver"><code class="language-plaintext highlighter-rouge">receiver</code></a> to respond to Lambda function events.</p>

<p>Update the <a href="https://github.com/slackapi/bolt-js-getting-started-app/blob/4c29a21438b40f0cbca71ece0d39b356dfcf88d5/app.js#L1">source code that imports your modules</a> in <code class="language-plaintext highlighter-rouge">app.js</code> to require Bolt’s AwsLambdaReceiver:</p>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="p">{</span> <span class="nx">App</span><span class="p">,</span> <span class="nx">AwsLambdaReceiver</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@slack/bolt</span><span class="dl">'</span><span class="p">);</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<blockquote>
  <p>💡  If implementing authentication with OAuth, you must use the <a href="https://github.com/slackapi/bolt-js/blob/main/src/receivers/ExpressReceiver.ts"><code class="language-plaintext highlighter-rouge">ExpressReceiver</code></a>. Please note that when using <code class="language-plaintext highlighter-rouge">ExpressReceiver</code>, the <code class="language-plaintext highlighter-rouge">processBeforeResponse: true</code> property is required during initialization to avoid latency issues.</p>
</blockquote>

<p>Then update the <a href="https://github.com/slackapi/bolt-js-getting-started-app/blob/4c29a21438b40f0cbca71ece0d39b356dfcf88d5/app.js#L10-L14">source code that initializes your Bolt app</a> to create a custom receiver using AwsLambdaReceiver:</p>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td>
<td class="rouge-code"><pre><span class="c1">// Initialize your custom receiver</span>
<span class="kd">const</span> <span class="nx">awsLambdaReceiver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AwsLambdaReceiver</span><span class="p">({</span>
    <span class="na">signingSecret</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">SLACK_SIGNING_SECRET</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// Initializes your app with your bot token and the AWS Lambda ready receiver</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">({</span>
    <span class="na">token</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">SLACK_BOT_TOKEN</span><span class="p">,</span>
    <span class="na">receiver</span><span class="p">:</span> <span class="nx">awsLambdaReceiver</span><span class="p">,</span>

    <span class="c1">// When using the AwsLambdaReceiver, processBeforeResponse can be omitted.</span>
    <span class="c1">// If you use other Receivers, such as ExpressReceiver for OAuth flow support</span>
    <span class="c1">// then processBeforeResponse: true is required. This option will defer sending back</span>
    <span class="c1">// the acknowledgement until after your handler has run to ensure your handler</span>
    <span class="c1">// isn't terminated early by responding to the HTTP request that triggered it.</span>

    <span class="c1">// processBeforeResponse: true</span>

<span class="p">});</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>Finally, at the bottom of your app, update the <a href="https://github.com/slackapi/bolt-js-getting-started-app/blob/main/app.js#L47-L52">source code that starts the HTTP server</a> to now respond to an AWS Lambda function event:</p>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="c1">// Handle the Lambda function event</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">handler</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">awsLambdaReceiver</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">handler</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>When you’re done, your app should look similar to the ⚡️<a href="https://github.com/slackapi/bolt-js/tree/main/examples/deploy-aws-lambda/app.js">Deploying to AWS Lambda app</a>.</p>

<p><strong>2. Add a serverless.yml</strong></p>

<p>Serverless Framework projects use a <code class="language-plaintext highlighter-rouge">serverless.yml</code> file to configure and deploy apps.</p>

<p>Create a new file called <code class="language-plaintext highlighter-rouge">serverless.yml</code> in your app’s root directory and paste the following:</p>

<div class="language-yaml highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
<td class="rouge-code"><pre><span class="na">service</span><span class="pi">:</span> <span class="s">serverless-bolt-js</span>
<span class="na">frameworkVersion</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>
<span class="na">provider</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">aws</span>
  <span class="na">runtime</span><span class="pi">:</span> <span class="s">nodejs14.x</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">SLACK_SIGNING_SECRET</span><span class="pi">:</span> <span class="s">${env:SLACK_SIGNING_SECRET}</span>
    <span class="na">SLACK_BOT_TOKEN</span><span class="pi">:</span> <span class="s">${env:SLACK_BOT_TOKEN}</span>
<span class="na">functions</span><span class="pi">:</span>
  <span class="na">slack</span><span class="pi">:</span>
    <span class="na">handler</span><span class="pi">:</span> <span class="s">app.handler</span>
    <span class="na">events</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">http</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">slack/events</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">post</span>
<span class="na">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">serverless-offline</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<blockquote>
  <p>💡 <code class="language-plaintext highlighter-rouge">SLACK_SIGNING_SECRET</code> and <code class="language-plaintext highlighter-rouge">SLACK_BOT_TOKEN</code> must be environment variables on your local machine.
You can <a href="/bolt-js/tutorial/getting-started#setting-up-your-project">learn how to export Slack environment variables</a> in our Getting Started guide.</p>
</blockquote>

<p><strong>3. Install Serverless Offline</strong></p>

<p>To make local development a breeze, we’ll use the <code class="language-plaintext highlighter-rouge">serverless-offline</code> module to emulate a deployed function.</p>

<p>Run the following command to install it as a development dependency:</p>

<div class="language-bash highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">--save-dev</span> serverless-offline
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>Congratulations, you’ve just prepared your Bolt app for AWS Lambda and Serverless! Now let’s run and deploy your app.</p>

<hr>

<h3 id="run-the-app-locally">Run the app locally</h3>

<p>Now that your app is configured to respond to an AWS Lambda function, we’ll set up your environment to run the app locally.</p>

<p><strong>1. Start your local servers</strong></p>

<p>First, use the <code class="language-plaintext highlighter-rouge">serverless offline</code> command to start your app and listen to AWS Lambda function events:</p>

<div class="language-zsh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>serverless offline <span class="nt">--noPrependStageInUrl</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<blockquote>
  <p>🏌️ Pro-tip: you can make code changes to your app in one terminal while running the above command in another terminal, and as you save code changes your app will reload automatically.</p>
</blockquote>

<p>Next, use ngrok to forward Slack events to your local machine:</p>

<div class="language-zsh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>ngrok http 3000
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<blockquote>
  <p>💡 <a href="https://slack.dev/bolt-js/tutorial/getting-started#setting-up-events">Learn how to use ngrok</a> to create a public URL and forward requests to your local machine.</p>
</blockquote>

<p><strong>2. Update your Request URL</strong></p>

<p>Next, visit your <a href="https://api.slack.com/apps">Slack app’s settings</a> to update your <strong>Request URL</strong> to use the ngrok web address.</p>

<blockquote>
  <p>💡 Your <strong>Request URL</strong> ends with <code class="language-plaintext highlighter-rouge">/slack/events</code>, such as <code class="language-plaintext highlighter-rouge">https://abc123.ngrok.io/slack/events</code>.</p>
</blockquote>

<p>First, select <strong>Interactivity &amp; Shortcuts</strong> from the side and update the <strong>Request URL</strong>:</p>

<p><img src="../assets/interactivity-and-shortcuts-page.png" alt="Interactivity &amp; Shortcuts page" title="Interactivity &amp; Shortcuts page"></p>

<p>Second, select <strong>Event Subscriptions</strong> from the side and update the <strong>Request URL</strong>:</p>

<p><img src="../assets/event-subscriptions-page.png" alt="Event Subscriptions page" title="Event Subscriptions page"></p>

<p><strong>3. Test your Slack app</strong></p>

<p>Now you can test your Slack app by inviting your app to a channel then saying “hello” (lower-case). Just like in the <a href="/bolt-js/tutorial/getting-started">Getting Started guide</a>, your app should respond back:</p>

<blockquote>
  <p>👩‍💻 hello<br>
🤖 Hey there @Jane!</p>
</blockquote>

<p>If you don’t receive a response, check your <strong>Request URL</strong> and try again.</p>

<blockquote>
  <p>💡 <strong>How does this work?</strong>
The ngrok and Serverless commands are configured on the same port (default: 3000). When a Slack event is sent to your <strong>Request URL</strong>, it’s received on your local machine by ngrok. The request is then forwarded to Serverless Offline, which emulates an AWS Lambda function event and triggers your Bolt app’s receiver. 🛫🛬 Phew, what a trip!</p>
</blockquote>

<hr>

<h3 id="deploy-the-app">Deploy the app</h3>

<p>In the previous section of this tutorial, you ran your app locally and tested it in a live Slack workspace. Now that you have a working app, let’s deploy it!</p>

<p>You can use the Serverless Framework tools to provision, package, and deploy your app onto AWS Lambda. After your app is deployed, you’ll need to update your app’s request URL to say “hello” to your app. ✨</p>

<p><strong>1. Deploy the app to AWS Lambda</strong></p>

<p>Now, deploy your app to AWS Lambda with the following command:</p>

<div class="language-shell highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td>
<td class="rouge-code"><pre>serverless deploy
<span class="c"># Serverless: Packaging service...</span>
<span class="c"># ...</span>
<span class="c"># endpoints:</span>
<span class="c">#   POST - https://atuzelnkvd.execute-api.us-east-1.amazonaws.com/dev/slack/events</span>
<span class="c"># ...</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>After your app is deployed, you’ll be given an <strong>endpoint</strong> which you’ll use as your app’s <strong>Request URL</strong>. Go ahead and copy this <strong>endpoint</strong> to use in the next section.</p>

<blockquote>
  <p>💡 The <strong>endpoint</strong> should end in <code class="language-plaintext highlighter-rouge">/slack/events</code>.</p>
</blockquote>

<p><strong>2. Update your Slack app’s settings</strong></p>

<p>Now we need to use your AWS Lambda <strong>endpoint</strong> as your <strong>Request URL</strong>, which is where Slack will send events and actions.
With your endpoint copied, navigate to your <a href="https://api.slack.com/apps">Slack app’s configuration</a> to update your app’s <strong>Request URLs</strong>.</p>

<p>First, select <strong>Interactivity &amp; Shortcuts</strong> from the side and update the <strong>Request URL</strong>:</p>

<p><img src="../assets/interactivity-and-shortcuts-page.png" alt="Interactivity &amp; Shortcuts page" title="Interactivity &amp; Shortcuts page"></p>

<p>Second, select <strong>Event Subscriptions</strong> from the side and update the <strong>Request URL</strong>:</p>

<p><img src="../assets/event-subscriptions-page.png" alt="Event Subscriptions page" title="Event Subscriptions page"></p>

<p><strong>3. Test your Slack app</strong></p>

<p>Your app is now deployed and Slack is updated, so let’s try it out!</p>

<p>Just like the <a href="#run-the-app-locally">running the app locally</a> section, open a Slack channel that your app is in and say “hello”. You app should once again respond with a greeting:</p>

<blockquote>
  <p>👩‍💻 hello<br>
🤖 Hey there @Jane!</p>
</blockquote>

<p><strong>4. Deploy an update</strong></p>

<p>As you continue to build your Slack app, you’ll need to deploy the updates. Let’s get a feel for this by updating your app to respond to a “goodbye” message.</p>

<p>Add the following code to <code class="language-plaintext highlighter-rouge">app.js</code> (<a href="https://github.com/slackapi/bolt-js/tree/main/examples/deploy-aws-lambda/app.js">source code on GitHub</a>):</p>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="c1">// Listens to incoming messages that contain "goodbye"</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="dl">'</span><span class="s1">goodbye</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">say</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// say() sends a message to the channel where the event was triggered</span>
  <span class="k">await</span> <span class="nx">say</span><span class="p">(</span><span class="s2">`See ya later, &lt;@</span><span class="p">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">user</span><span class="p">}</span><span class="s2">&gt; :wave:`</span><span class="p">);</span>
<span class="p">});</span>
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>Deploy the update using the same command as before:</p>

<div class="language-shell highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>serverless deploy
</pre></td>
</tr></tbody></table></code></pre>
  </div>
</div>

<p>When the deploy is complete, you can open a Slack channel that your app has joined and say “goodbye” (lower-case). You should see a friendly farewell from your Slack app.</p>

<blockquote>
  <p>⛳️ If you are making small changes to single functions, you can deploy only a single function using <code class="language-plaintext highlighter-rouge">serverless deploy function -f my-function</code> which is much faster. Run <code class="language-plaintext highlighter-rouge">serverless help deploy function</code> for more detailed help.</p>
</blockquote>

<hr>

<h3 id="next-steps">Next steps</h3>

<p>You just deployed your first ⚡️<a href="https://github.com/slackapi/bolt-js/tree/main/examples/deploy-aws-lambda">Bolt for JavaScript app to AWS Lambda</a>! 🚀</p>

<p>Now that you’ve built and deployed a basic app, here are some ideas you can explore to extend, customize, and monitor it:</p>

<ul>
  <li>Brush up on <a href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html">AWS Lambda</a> and the <a href="https://www.serverless.com/framework/docs/providers/aws/guide/intro/">Serverless Framework</a>.</li>
  <li>Extend your app with <a href="/bolt-js/concepts#basic">Bolt’s Basic Concepts</a> and <a href="https://www.serverless.com/framework/docs/providers/aws/guide/plugins/">Serverless plugins</a>.</li>
  <li>Learn about logging in <a href="/bolt-js/concepts#logging">Bolt’s Advanced Concepts</a> and how to <a href="https://www.serverless.com/framework/docs/providers/aws/cli-reference/logs/">view log messages with Serverless</a>.</li>
  <li>Get ready for primetime with AWS Lambda <a href="https://www.serverless.com/framework/docs/providers/aws/guide/testing/">testing</a> and <a href="https://www.serverless.com/framework/docs/providers/aws/guide/deploying/">deployment environments</a>.</li>
</ul>


        </div>
    </div>

  </div>
  <script src="http://localhost:4000/bolt-js/scripts/tutorial_nav.js"></script>

  
<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-56978219-13', 'auto');
  ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>

</body>
</html>