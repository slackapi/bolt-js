---
title: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
lang: ja-jp
slug: /concepts/actions
---

Bolt ã‚¢ãƒ—ãƒªã¯ `action` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã¦ã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é¸æŠžã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãªã©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒªãƒƒã‚¹ãƒ³ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒªã‚¹ãƒ‹ãƒ³ã‚°

ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯æ–‡å­—åˆ—åž‹ã® `action_id` ã¾ãŸã¯ RegExp ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã§ãã¾ã™ã€‚ `action_id` ã¯ã€Slack ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¸Šã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¸€æ„ã®è­˜åˆ¥å­ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ 

ã™ã¹ã¦ã® `action()` ã®ä¾‹ã§ `ack()` ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚Slack ã‹ã‚‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ä¿¡ã—ãŸã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªã‚¹ãƒŠãƒ¼å†…ã§ `ack()` é–¢æ•°ã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã¤ã„ã¦ã¯ã€ã€Œ[ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ç¢ºèª](/concepts/acknowledge)ã€ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§èª¬æ˜Žã—ã¦ã„ã¾ã™ã€‚

:::info 

Bolt 2.x ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼ˆä»¥å‰ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¨å‘¼ã°ã‚Œã¦ã„ã¾ã—ãŸï¼‰ã¯ `action()` ã§ã¯ãªã `shortcut()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã®å¤‰æ›´ã«ã¤ã„ã¦ã¯ [2.x ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](/tutorial/migration-v2)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

:::

`block_actions` ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€[ã“ã¡ã‚‰](https://docs.slack.dev/reference/interaction-payloads) ã‚’ã”è¦§ãã ã•ã„ã€‚ãƒªã‚¹ãƒŠãƒ¼å†…ã‹ã‚‰ãƒ“ãƒ¥ãƒ¼ã®å®Œå…¨ãªãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°å†…ã§ `body` å¼•æ•°ã‚’å‚ç…§ã—ã¾ã™ã€‚

```javascript
// action_id ãŒ "approve_button" ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã‚‹æ¯Žã«ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
app.action('approve_button', async ({ ack }) => {
  await ack();
  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’åæ˜ ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
});
```

### åˆ¶ç´„ä»˜ãã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã—ãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒªã‚¹ãƒ‹ãƒ³ã‚°

åˆ¶ç´„ä»˜ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ã¦ã€ `callback_id` ã€ `block_id` ã€ãŠã‚ˆã³ `action_id` (ã¾ãŸã¯ãã‚Œã‚‰ã®çµ„ã¿åˆã‚ã›) ã‚’ãƒªãƒƒã‚¹ãƒ³ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã®åˆ¶ç´„ã«ã¯ã€æ–‡å­—åˆ—åž‹ã¾ãŸã¯ RegExp ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚


```javascript
// action_id ãŒ 'select_user' ã¨ä¸€è‡´ã—ã€block_id ãŒ 'assign_ticket' ã¨ä¸€è‡´ã™ã‚‹å ´åˆã®ã¿ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
app.action({ action_id: 'select_user', block_id: 'assign_ticket' },
  async ({ body, client, ack, logger }) => {
    await ack();
    try {
      if (body.message) {
        const result = await client.reactions.add({
          name: 'white_check_mark',
          timestamp: body.message.ts,
          channel: body.channel.id
        });

        logger.info(result);
      }
    }
    catch (error) {
      logger.error(error);
    }
  });
```

## ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¸ã®å¿œç­”

ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¸ã®å¿œç­”ã«ã¯ã€ä¸»ã« 2 ã¤ã®ã‚„ã‚Šæ–¹ãŒã‚ã‚Šã¾ã™ã€‚1 ã¤ç›®ã® (æœ€ã‚‚ä¸€èˆ¬çš„ãª) ã‚„ã‚Šæ–¹ã¯ `say` é–¢æ•°ã®åˆ©ç”¨ã§ã™ã€‚ `say` é–¢æ•°ã¯ã€Slack å†…ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒç™ºç”Ÿã—ãŸä¼šè©±ï¼ˆãƒãƒ£ãƒ³ãƒãƒ«ã‚„ DMï¼‰ã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚

ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«å¿œç­”ã™ã‚‹ 2 ã¤ç›®ã®æ–¹æ³•ã¯ `respond()` ã§ã™ã€‚ã“ã‚Œã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ç´ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ `response_url` ã‚’ç”¨ã„ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«è¡Œã†ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã™ã€‚

```javascript
// action_id ãŒ "approve_button" ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã‚‹æ¯Žã«ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
app.action('approve_button', async ({ ack, say }) => {
  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ç¢ºèª
  await ack();
  await say('Request approved ðŸ‘');
});
```

### `respond()` ã®ä½¿ç”¨

`respond()` ã¯ `response_url` ã‚’å‘¼ã³å‡ºã™ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã‚ã‚‹ãŸã‚ã€ãã‚Œã‚’ç›´æŽ¥ä½¿ã†ã¨ãã¨åŒæ§˜ã«å‹•ä½œã—ã¾ã™ã€‚æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªå¼•æ•°ã§ã‚ã‚‹ `response_type` (å€¤ã¯ `in_channel` ã¾ãŸã¯ `ephemeral` )ã€ `replace_original` ã€ `delete_original` ã‚’å«ã‚€ JSON ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```javascript
// "user_select" ã® action_id ãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒªãƒƒã‚¹ãƒ³
app.action('user_select', async ({ action, ack, respond }) => {
  await ack();
  if (action.type === 'users_select') {
    await respond(`You selected <@${action.selected_user}>`);
  }
});
```